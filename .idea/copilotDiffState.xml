<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/auth-service/src/main/java/com/em/authservice/config/SecurityConfig.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/auth-service/src/main/java/com/em/authservice/config/SecurityConfig.java" />
              <option name="originalContent" value="package com.em.authservice.config;&#10;&#10;import com.em.authservice.middleware.JwtAuthenticationFilter;&#10;import com.em.authservice.service.AccountService;&#10;import org.springframework.beans.factory.annotation.Autowired;&#10;import org.springframework.context.annotation.Bean;&#10;import org.springframework.context.annotation.Configuration;&#10;import org.springframework.security.authentication.AuthenticationManager;&#10;import org.springframework.security.authentication.AuthenticationProvider;&#10;import org.springframework.security.authentication.dao.DaoAuthenticationProvider;&#10;import org.springframework.security.config.annotation.authentication.configuration.AuthenticationConfiguration;&#10;import org.springframework.security.config.annotation.web.builders.HttpSecurity;&#10;import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;&#10;import org.springframework.security.config.annotation.web.configurers.AbstractHttpConfigurer;&#10;import org.springframework.security.config.http.SessionCreationPolicy;&#10;import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;&#10;import org.springframework.security.web.SecurityFilterChain;&#10;import org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;&#10;import org.springframework.security.core.userdetails.UserDetailsService;&#10;&#10;@Configuration&#10;@EnableWebSecurity&#10;public class SecurityConfig {&#10;    private final UserDetailsService userDetailsService;&#10;    private final JwtAuthenticationFilter jwtAuthenticationFilter;&#10;    private final BCryptPasswordEncoder bCryptPasswordEncoder;&#10;&#10;    public SecurityConfig(UserDetailsService userDetailsService, JwtAuthenticationFilter jwtAuthenticationFilter, BCryptPasswordEncoder bCryptPasswordEncoder) {&#10;        this.userDetailsService = userDetailsService;&#10;        this.jwtAuthenticationFilter = jwtAuthenticationFilter;&#10;        this.bCryptPasswordEncoder = bCryptPasswordEncoder;&#10;    }&#10;&#10;    @Bean&#10;    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {&#10;        return http&#10;                .csrf(AbstractHttpConfigurer::disable)&#10;                .authorizeHttpRequests(auth-&gt;auth&#10;                        .requestMatchers(&quot;/api/auth/login&quot;, &quot;/api/auth/register&quot;, &quot;/api/auth/refresh-token&quot;, &quot;/api/auth/validate-token&quot;).permitAll()&#10;                        .requestMatchers(&quot;/api/auth/logout&quot;).authenticated()&#10;                        .anyRequest().authenticated())&#10;                .formLogin(AbstractHttpConfigurer::disable)&#10;                .httpBasic(AbstractHttpConfigurer::disable)&#10;                .sessionManagement(session-&gt;session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))&#10;                .authenticationProvider(authenticationProvider())&#10;                .addFilterBefore(jwtAuthenticationFilter, UsernamePasswordAuthenticationFilter.class)&#10;                .build();&#10;    }&#10;&#10;    @Bean&#10;    public AuthenticationManager authenticationManager(AuthenticationConfiguration config) throws Exception {&#10;        return config.getAuthenticationManager();&#10;    }&#10;&#10;   @Bean&#10;    public AuthenticationProvider authenticationProvider() {&#10;        DaoAuthenticationProvider provider = new DaoAuthenticationProvider();&#10;        provider.setPasswordEncoder(bCryptPasswordEncoder);&#10;        provider.setUserDetailsService(userDetailsService);&#10;        return provider;&#10;   }&#10;&#10;&#10;&#10;}&#10;" />
              <option name="updatedContent" value="package com.em.authservice.config;&#10;&#10;import com.em.authservice.middleware.JwtAuthenticationFilter;&#10;import com.em.authservice.service.AccountService;&#10;import org.springframework.beans.factory.annotation.Autowired;&#10;import org.springframework.context.annotation.Bean;&#10;import org.springframework.context.annotation.Configuration;&#10;import org.springframework.security.authentication.AuthenticationManager;&#10;import org.springframework.security.authentication.AuthenticationProvider;&#10;import org.springframework.security.authentication.dao.DaoAuthenticationProvider;&#10;import org.springframework.security.config.annotation.authentication.configuration.AuthenticationConfiguration;&#10;import org.springframework.security.config.annotation.web.builders.HttpSecurity;&#10;import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;&#10;import org.springframework.security.config.annotation.web.configurers.AbstractHttpConfigurer;&#10;import org.springframework.security.config.http.SessionCreationPolicy;&#10;import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;&#10;import org.springframework.security.web.SecurityFilterChain;&#10;import org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;&#10;import org.springframework.security.core.userdetails.UserDetailsService;&#10;&#10;@Configuration&#10;@EnableWebSecurity&#10;public class SecurityConfig {&#10;    private final UserDetailsService userDetailsService;&#10;    private final JwtAuthenticationFilter jwtAuthenticationFilter;&#10;    private final BCryptPasswordEncoder bCryptPasswordEncoder;&#10;&#10;    public SecurityConfig(UserDetailsService userDetailsService, JwtAuthenticationFilter jwtAuthenticationFilter, BCryptPasswordEncoder bCryptPasswordEncoder) {&#10;        this.userDetailsService = userDetailsService;&#10;        this.jwtAuthenticationFilter = jwtAuthenticationFilter;&#10;        this.bCryptPasswordEncoder = bCryptPasswordEncoder;&#10;    }&#10;&#10;    @Bean&#10;    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {&#10;        return http&#10;                .csrf(AbstractHttpConfigurer::disable)&#10;                .authorizeHttpRequests(auth-&gt;auth&#10;                        .requestMatchers(&quot;/api/auth/login&quot;, &quot;/api/auth/register&quot;, &quot;/api/auth/refresh-token&quot;, &quot;/api/auth/validate-token&quot;).permitAll()&#10;                        .requestMatchers(&quot;/api/auth/logout&quot;).authenticated()&#10;                        .anyRequest().authenticated())&#10;                .formLogin(AbstractHttpConfigurer::disable)&#10;                .httpBasic(AbstractHttpConfigurer::disable)&#10;                .sessionManagement(session-&gt;session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))&#10;                .authenticationProvider(authenticationProvider())&#10;                .addFilterBefore(jwtAuthenticationFilter, UsernamePasswordAuthenticationFilter.class)&#10;                .build();&#10;    }&#10;&#10;    @Bean&#10;    public AuthenticationManager authenticationManager(AuthenticationConfiguration config) throws Exception {&#10;        return config.getAuthenticationManager();&#10;    }&#10;&#10;   @Bean&#10;    public AuthenticationProvider authenticationProvider() {&#10;        DaoAuthenticationProvider provider = new DaoAuthenticationProvider();&#10;        provider.setPasswordEncoder(bCryptPasswordEncoder);&#10;        provider.setUserDetailsService(userDetailsService);&#10;        return provider;&#10;   }&#10;&#10;&#10;&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/auth-service/src/main/java/com/em/authservice/dto/response/TokenValidResponse.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/auth-service/src/main/java/com/em/authservice/dto/response/TokenValidResponse.java" />
              <option name="originalContent" value="package com.em.authservice.dto.response;&#10;&#10;import com.fasterxml.jackson.databind.annotation.JsonSerialize;&#10;import lombok.Builder;&#10;import lombok.Data;&#10;&#10;import java.util.List;&#10;&#10;@JsonSerialize&#10;@Builder&#10;@Data&#10;public class TokenValidResponse {&#10;    private boolean valid;&#10;    private String username;&#10;    private List&lt;String&gt; roles;&#10;}&#10;" />
              <option name="updatedContent" value="package com.em.authservice.dto.response;&#10;&#10;import com.fasterxml.jackson.databind.annotation.JsonSerialize;&#10;import lombok.Builder;&#10;import lombok.Data;&#10;&#10;import java.util.List;&#10;&#10;@JsonSerialize&#10;@Builder&#10;@Data&#10;public class TokenValidResponse {&#10;    private boolean valid;&#10;    private String username;&#10;    private List&lt;String&gt; roles;&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>